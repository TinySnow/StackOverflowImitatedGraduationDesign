# task

## 待完成任务

- [ ] token 相关逻辑
- [ ] canal 数据库同步
- [ ] 个人中心前端
- [ ] 个人中心后端
- [ ] 问题详情前端
- [ ] 问题详情后端
- [ ] 问题排序算法后端
- [ ] 搜索页面前端
- [ ] 搜索功能后台
- [ ] tag 系统后台
- [ ] 最佳答案功能前端
- [ ] 最佳答案后端
- [ ] 处理图片存储
- [ ] 主页发起提问

## 技术细节

- 评论可以做成多级评论，但最终采用二级链表式评论

  - 但内容所占的横向空间会被标识层级的缩进压缩
  - 最后内容所占的纵向空间会被无限拉大
  - 考虑之下不采用

- Elastic Search 搜索并未经过后端服务器

  - 严格意义上来说需要经过后端处理数据之后才返回前端
  - 前端也好统一对接后端接口
  - 但是此架构会使后端请求压力骤然增大，可能需要 Load Balance
  - 考虑之下，前端直接请求 Elastic Search 服务器，以缓解压力

- 查看问题和搜索等只读属性，没有设置权限校验

  - 此系统初衷便是希望用户能够迅速地找到解决方案
  - 并非一定需要注册账号
  - 而只有在写入数据的时候需要权限校验

- MySQL 和 Elastic Search 全文搜索之间的数据同步问题

  - 最开始采用 canal 消费 MySQL binlog 进行增量同步
  - 但是 BUG 实在有点多，而且与 Spring Boot 所用的 Java Version 对不上，最终启用

    - Spring Boot Version 2.7.9 => JDK 17
    - Canal 1.1.6 => JDK 8

  - 使用 ELK 中的 Logstash 进行定时全量同步

- 出于人道主义考虑，没有设置可以删除任意一个用户消息的 admin 账户

  - 每个人都有自由发言的权利
  - 不能控制别人的言论自由